# å¤šæ¨¡æ€äººè„¸+æŒ‡çº¹èåˆè¯†åˆ«é…ç½®æ–‡ä»¶
# ä¸“ä¸ºæ¯•ä¸šè®ºæ–‡å¤šæ¨¡æ€èåˆå®éªŒè®¾è®¡ (300äººç‰ˆæœ¬)

# ğŸ”§ ã€æŒ‡ä»¤Bã€‘ã€æŒ‡ä»¤Cã€‘ä¼˜åŒ–è®­ç»ƒé…ç½®
# è®­ç»ƒé…ç½®
training:
  epochs: 50
  batch_size: 32
  learning_rate: 1e-4  # èåˆå±‚å­¦ä¹ ç‡
  weight_decay: 1e-2    # AdamWéœ€è¦é€‚å½“å¢åŠ æƒé‡è¡°å‡
  optimizer: 'adamw'    # AdamWä¼˜åŒ–å™¨
  warmup_epochs: 5      # Warmupè½®æ¬¡
  scheduler_type: 'cosine'  # Cosineå­¦ä¹ ç‡è°ƒåº¦

  # ğŸ”§ ã€æŒ‡ä»¤Cã€‘è§£å†»ç­–ç•¥
  unfreeze_epoch: 10     # å‰10è½®å†»ç»“Backboneï¼Œç¬¬10è½®åè§£å†»
  face_lr: 1e-5         # è§£å†»åäººè„¸æ¨¡å‹çš„å­¦ä¹ ç‡
  fp_lr: 1e-5           # è§£å†»åæŒ‡çº¹æ¨¡å‹çš„å­¦ä¹ ç‡

# æ¨¡å‹é…ç½®ï¼ˆå¤šæ¨¡æ€èåˆï¼‰
model:
  # äººè„¸åˆ†æ”¯é…ç½®
  face_model_type: 'facenet'
  face_embedding_dim: 512
  face_pretrained: true  # åŠ è½½é¢„è®­ç»ƒæƒé‡
  face_spatial_attention: false  # ğŸ”§ ç¦ç”¨ç©ºé—´æ³¨æ„åŠ›ï¼ˆä¸face_config.yamlä¸€è‡´ï¼‰

  # æŒ‡çº¹åˆ†æ”¯é…ç½®
  fingerprint_model_type: 'fingerprint_net'
  fingerprint_embedding_dim: 256
  fingerprint_pretrained: true  # åŠ è½½é¢„è®­ç»ƒæƒé‡

  # èåˆå±‚é…ç½®
  fusion_method: 'concat'  # 'concat', 'attention_fusion', 'cross_attention', 'tensor_fusion'
  fusion_hidden_dim: 512
  fusion_dropout_rate: 0.3

  num_classes: 300  # 300äºº

# æ•°æ®é…ç½®
data:
  face_image_size: 224
  fingerprint_image_size: 224
  use_augmentation: true
  augmentation:
    random_horizontal_flip: true
    random_rotation: 10
    color_jitter: true
    random_crop: false
    random_resized_crop: true
    random_erasing_prob: 0.2

# è·¯å¾„é…ç½®
paths:
  data_dir: './data'
  face_data_dir: './data/face/face'
  fingerprint_data_dir: './data/fingerprint/fingerprint/organized'
  mapping_file: './data/face_fingerprint_mapping.json'
  checkpoint_dir: './checkpoints/fusion'
  log_dir: './logs/fusion'
  config_dir: './configs'
  results_dir: './results/fusion'

# å…¶ä»–é…ç½®
misc:
  seed: 42
  num_workers: 4
  save_freq: 5
  log_freq: 10
  use_amp: true
  experiment_name: 'fusion_300persons'  # 300äººèåˆå®éªŒ
  early_stopping: true
  early_stopping_patience: 10

# å®éªŒé…ç½®
experiment:
  ablation_study: false
  test_time_augmentation: false
  save_features: true  # ä¿å­˜ç‰¹å¾å‘é‡ç”¨äºåˆ†æ
  evaluate_every_epoch: true

  # èåˆç‰¹æœ‰å®éªŒè®¾ç½®
  modality_ablation: true  # å¼€å¯æ¨¡æ€æ¶ˆèå®éªŒ
  face_only: false
  fingerprint_only: false

# è°ƒè¯•é…ç½®
debug:
  debug_mode: false
  max_samples: null
  log_images: false
